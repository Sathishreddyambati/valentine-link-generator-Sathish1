<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Will you be my Valentine?</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:'Segoe UI',sans-serif;
  background:linear-gradient(180deg,#ffe6ee,#fff);
  margin:0;
}
.container{
  max-width:420px;
  margin:40px auto;
  background:#fff5f8;
  border-radius:20px;
  padding:25px;
  box-shadow:0 10px 30px rgba(255,105,135,.25);
}
h1{text-align:center;color:#7a1c3d;}
p{text-align:center;color:#a04b63;}
label{font-weight:600;color:#7a1c3d;}
input,textarea{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid #f3b5c8;
  margin-top:6px;
  font-size:16px;
}
.buttons{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  margin-top:15px;
}
button{
  border:none;
  border-radius:30px;
  padding:12px;
  font-size:16px;
  cursor:pointer;
}
.generate{
  background:#ff5c8a;
  color:#fff;
  grid-column:1/3;
}
.copy{
  background:#fff;
  color:#7a1c3d;
  border:1px solid #f3b5c8;
}
.result{
  margin-top:20px;
  display:none;
}
</style>
</head>

<body>

<div class="container">
<h1>"Will you be my Valentine?"</h1>
<p>Create a super cute personalized link ğŸ’˜</p>

<label>Your Name</label>
<input id="from" placeholder="e.g., Aaaa">

<label style="margin-top:12px;">Your Valentine's Name</label>
<input id="to" placeholder="e.g., Bbbbb">

<label style="margin-top:12px;">Your Photo</label>
<input type="file" id="photo" accept="image/*">

<label style="margin-top:12px;">Custom final message</label>
<textarea id="custom" placeholder="Write something sweet..."></textarea>

<div class="buttons">
  <button class="generate" onclick="generate()">Generate ğŸ’—</button>
  <button class="copy" onclick="copyLink()">Copy link ğŸ”—</button>
  <button class="copy" onclick="copyMsg()">Copy message ğŸ’Œ</button>
  <button class="copy" onclick="openLink()">Open link ğŸ’</button>
</div>

<div class="result" id="result">
  <p><b>Your personalized URL</b></p>
  <input id="link" readonly>
  <p><b>Ready-to-send message</b></p>
  <textarea id="msg"></textarea>
  <p style="font-size:13px;color:#a04b63;">
    Tip: You can edit the message before copying âœ¨
  </p>
</div>
</div>

<script>
let photoData = "";

// Read photo as Base64
document.getElementById("photo").addEventListener("change", e => {
  if(!e.target.files[0]) return;
  const reader = new FileReader();
  reader.onload = () => photoData = reader.result;
  reader.readAsDataURL(e.target.files[0]);
});

function generate(){
  const f = from.value.trim();
  const t = to.value.trim();
  if(!f || !t){
    alert("Enter both names");
    return;
  }

  const params = new URLSearchParams({
    from: f,
    name: t,
    msg: custom.value,
    photo: photoData
  });

  const url =
    location.origin +
    "/valentine-link-generator-Sathish1/valentine.html?" +
    params.toString();

  link.value = url;

  msg.value =
`Hi ${t},

I made something cute for you ğŸ˜Š.

Will you be my Valentine? ğŸ’–
Click the link below ğŸ‘‡
${url}`;

  result.style.display = "block";
}

/* âœ… ANDROID-SAFE COPY FIX */
function copyTextFallback(text){
  const textarea = document.createElement("textarea");
  textarea.value = text;
  textarea.style.position = "fixed";
  textarea.style.opacity = "0";
  document.body.appendChild(textarea);
  textarea.focus();
  textarea.select();

  try{
    document.execCommand("copy");
    alert("Copied to clipboard âœ…");
  }catch(e){
    alert("Copy failed âŒ Long-press and copy manually");
  }

  document.body.removeChild(textarea);
}

function copyLink(){
  copyTextFallback(link.value);
}

function copyMsg(){
  copyTextFallback(msg.value);
}

function openLink(){
  window.open(link.value, "_blank");
}
</script>

</body>
</html>
